FROM node:22

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

COPY . .

EXPOSE 3000


ARG MONGODBURI
ARG CLIENTID
ARG CLIENTSECRET
ARG APIKEY
ARG APIKEYSECRET

ENV MONGODBURI=${MONGODBURI}
ENV CLIENTID=${CLIENTID}
ENV CLIENTSECRET=${CLIENTSECRET}
ENV APIKEY=${APIKEY}
ENV APIKEYSECRET=${APIKEYSECRET}

CMD [ "node", "server.js" ]